<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Kirti AR Viewer</title>

    <script type="module"
      src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
    </script>

    <style>
      body {
        margin: 0;
        background: #000;
        font-family: Arial, sans-serif;
        overflow: hidden;
        color: #fff;
      }

      model-viewer {
        width: 100vw;
        height: 100vh;
      }

      /* UI Panel */
      #controls {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(20, 20, 20, 0.8);
        padding: 15px 20px;
        border-radius: 12px;
        backdrop-filter: blur(6px);
        display: flex;
        flex-direction: column;
        gap: 12px;
        width: 90%;
        max-width: 420px;
      }

      label {
        font-size: 14px;
        opacity: 0.9;
      }

      input[type="range"] {
        width: 100%;
      }
    </style>
  </head>

  <body>
    <model-viewer
      id="viewer"
      src="kirtis.glb"
      ar
      ar-modes="webxr scene-viewer quick-look"
      ar-placement="floor"
      camera-controls
      auto-rotate
      shadow-intensity="1.3"
      environment-image="neutral"
      exposure="1.2"
    ></model-viewer>

    <!-- UI Controls -->
    <div id="controls">
      <div>
        <label>Scale</label>
        <input id="scaleSlider" type="range" min="0.1" max="3" step="0.01" value="1" />
      </div>

      <div>
        <label>Rotation (Turntable)</label>
        <input id="rotateSlider" type="range" min="0" max="360" step="1" value="0" />
      </div>

      <div>
        <label>Lighting: Night ←→ Day</label>
        <input id="lightSlider" type="range" min="0" max="1" step="0.01" value="0.5" />
      </div>
    </div>

    <script>
      const viewer = document.getElementById('viewer');
      const scaleSlider = document.getElementById('scaleSlider');
      const rotateSlider = document.getElementById('rotateSlider');
      const lightSlider = document.getElementById('lightSlider');

      // Scale
      scaleSlider.addEventListener('input', () => {
        const s = scaleSlider.value;
        viewer.scale = `${s} ${s} ${s}`;
      });

      // Turntable rotation: ONLY Y-axis
      rotateSlider.addEventListener('input', () => {
        const r = rotateSlider.value;
        viewer.orientation = `0deg ${r}deg 0deg`;
      });

      // Lighting control
      lightSlider.addEventListener('input', () => {
        const t = lightSlider.value;

        viewer.exposure = 0.4 + t * 1.0;

        if (t < 0.5) {
          viewer.environmentImage =
            "https://modelviewer.dev/shared-assets/environments/moonless_night_1k.hdr";
        } else {
          viewer.environmentImage =
            "https://modelviewer.dev/shared-assets/environments/neutral.hdr";
        }
      });
    </script>
  </body>
</html>
